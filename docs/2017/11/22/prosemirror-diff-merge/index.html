<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="me" href="https://mastodon.social/@gvwilson">
<link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.ico">
<link rel="alternate" type="application/atom+xml" title="The Third Bit" href="../../../../atom.xml">
<!-- <script defer data-domain="third-bit.com" src="https://plausible.io/js/plausible.js"></script> -->
    <script src="https://kit.fontawesome.com/4eee35f757.js"></script>
    <link rel="stylesheet" href="../../../../assets/thirdbit.css">
    <link rel="stylesheet" href="../../../../assets/page.css">
    
<title>The Third Bit: Diff and Merge for ProseMirror</title>

    
  </head>
  <body>
    <nav>
  <div class="row underline">
    <div class="col-2 left">
      <a class="navlink" href="../../../../">Home</a>
    </div>
    <div class="col-10 right">
      <a class="navlink" href="../../../../about/">about</a>
      <a class="navlink" href="../../../../blog/">blog</a>
      <a class="navlink" href="../../../../selected/">selected</a>
      <a class="navlink" href="../../../../talks/">talks</a>
      <a class="navlink" href="../../../../projects/">projects</a>
      <a class="navlink" href="../../../../ideas/">ideas</a>
      <a class="navlink" href="../../../../bib/">bibliography</a>
      <a class="navlink" href="../../../../fiction/">fiction</a>
    </div>
  </div>
</nav>
    <main>
      
<h1>Diff and Merge for ProseMirror</h1>


<div class="row">
  <div class="col-2 left">
    
      <a href="../../../../2017/11/20/data-science-for-software-dev/">
        &lArr; <span class="pagination-text">previous</span>
      </a>
    
  </div>
  <div class="col-8 center">
    Posted <time datetime="2017-11-22" class="post-date">2017-11-22</time>
  </div>
  <div class="col-2 right">
    
      <a href="../../../../2017/11/24/common-misconceptions/">
        <span class="pagination-text">next</span> &rArr;
      </a>
    
  </div>
</div>
<!-- content --><p><a href="https://prosemirror.net/">ProseMirror</a> is one of the most interesting projects I&rsquo;ve come across this year.
As its blurb says:</p>
<blockquote>
<p>An ideal content editor produces structured, semantically meaningful
documents, but does so in a way that is easy for users to
understand. ProseMirror tries to bridge the gap between Markdown
text editing and classical WYSIWYG editors.</p>
<p>It does this by implementing a WYSIWYG-style editing interface for
documents more constrained and structured than plain HTML. You can
customize the shape and structure of the documents your editor
creates, and tailor them to your application&rsquo;s needs.</p>
</blockquote>
<p>More specifically,
ProseMirror stores a document as JSON,
and allows the creators of custom editors to provide templates
to specify what&rsquo;s allowed where.
For example,
you can say that a page like this one has to have
a header with three fields called <code>layout</code>, <code>title</code>, and <code>date</code>,
a body consisting of paragraphs and block quotes,
and a list of URLs at the end.</p>
<p>ProseMirror is designed for real-time collaborative editing:
its author even says that <a href="http://marijnhaverbeke.nl/blog/collaborative-editing.html#offline-work">its model is useless</a>.
Respectfully,
I disagree:
<a href="https://jupyter.org/">Jupyter Notebooks</a> are stored as JSON,
<a href="http://tavisharmstrong.com/">Tavish Armstrong</a> and his colleagues
implemented <a href="http://tavisharmstrong.com/2014/04/06/nbdiff-a-diffing-and-merging-tool-for-the-ipython-notebook/">diff and merge for them</a> back in 2014 as an undergraduate honors project,
and <a href="https://github.com/jupyter/nbdime">nbdime</a> now provides a full suite of diff and merge tools.
I think it would be really exciting to implement a general JSON-based diff-and-merge for ProseMirror
that leveraged the structural information in the schemas
in the way that <a href="http://cmpp.coodesoft.com/">Compare++</a> and <a href="https://www.semanticmerge.com/">SemanticMerge</a> do syntax-aware merging for code.
&ldquo;Slide moved&rdquo; is just the beginning:
once there&rsquo;s a schema for tables,
there&rsquo;s the possibility of diffing rows and columns instead of the markup used to represent them,
and if anyone ever gets around to creating a diagram plugin for ProseMirror
(using a JSON encoding of SVG as a store)
we might finally get the diff tool for diagrams that I&rsquo;ve been yearning for.</p>
<p>I&rsquo;ve been advocating <a href="http://queue.acm.org/detail.cfm?id=1039534">extensible programming systems</a>
(and more generally, extensible authoring systems) for years.
A few tools, like <a href="http://foswiki.cs.uu.nl/foswiki/Proxima/WebHome">Proxima</a>, <a href="../../../../2011/09/16/extensible-programming-a-new-hope/">Larch</a>, <a href="https://www.jetbrains.com/mps/">MPS</a>, and <a href="https://www.eclipse.org/Xtext/">Xtext</a>
showed what could be done,
but the idea never caught on.
I&rsquo;ve also been arguing that <a href="../../../../2013/05/01/merging-is-the-real-revolution/">merging is the magic that makes collaboration at scale possible</a>,
and asking (or begging) developers to implement diff and merge in LibreOffice
so that the 99% of humanity who <em>aren&rsquo;t</em> willing to dumb everything down to ASCII text
can use this powerful idea with the tools and formats they&rsquo;re already using.
Diff and merge for ProseMirror wouldn&rsquo;t be everything I want,
but it would be a big step in the right direction.</p><!-- /content -->

    </main>
    <footer>
  &copy; 2004-2025 <a href="../../../../about/">Greg Wilson</a>
  <a href="mailto:gvwilson@third-bit.com"><img src="../../../../assets/icons/envelope.svg" alt="email" class="footer-icon"></a>
  <a href="https://www.linkedin.com/in/greg-wilson-a26510b6/"><img src="../../../../assets/icons/linkedin.svg" alt="LinkedIn" class="footer-icon"></a>
  <a href="https://mastodon.social/@gvwilson"><img src="../../../../assets/icons/mastodon.svg" alt="Mastodon" class="footer-icon"></a>
  <a href="https://github.com/gvwilson"><img src="../../../../assets/icons/github.svg" alt="GitHub" class="footer-icon"></a>
  <a href="https://www.youtube.com/channel/UCbDQ7FIeYB3FHRADAjUjfrg"><img src="../../../../assets/icons/youtube.svg" alt="YouTube" class="footer-icon"></a>
  <a href="../../../../bib/"><img src="../../../../assets/icons/orcid.svg" alt="ORCID" class="footer-icon"></a>
  <a href="../../../../atom.xml"><img src="../../../../assets/icons/rss.svg" alt="RSS feed" class="footer-icon"></a>
  <a href="../../../../license/"><img src="../../../../assets/icons/cc-by.svg" alt="license" class="footer-icon"></a>
  <a href="../../../../colophon/"><img src="../../../../assets/icons/pencil.svg" alt="colophon" class="footer-icon"></a>
  <a href="../../../../cv/"><img src="../../../../assets/icons/file.svg" alt="CV" class="footer-icon"></a>
</footer>
  </body>
</html>